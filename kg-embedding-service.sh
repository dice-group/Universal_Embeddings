#!/bin/sh
# cURL commands for KG entity embedding Service
# https://github.com/dice-group/kg-embedding-service


# Indexes

#curl -X GET http://unikge.cs.upb.de:5001/get-index-list
# {"index_list":[".tasks","transe_dbpedia_dot_relation","transe_dbpedia_complex_entity","transe_dbpedia_l2_entity","shallom_dbpedia_index","transe_dbpedia_dot_entity","complex_dbpedia_relation"]}

#curl -X GET http://unikge.cs.upb.de:5001/get-index-info -H "Content-Type: application/json" -d '{"indexname":"shallom_dbpedia_index"}'
# {"Index Config":{"aliases":{},"mappings":{"properties":{"embeddings":{"dims":25,"type":"dense_vector"},"entity":{"type":"keyword"},"id":{"type":"keyword"}}},"settings":{"index":{"creation_date":"1638917659978","number_of_replicas":"1","number_of_shards":"5","provided_name":"shallom_dbpedia_index","routing":{"allocation":{"include":{"_tier_preference":"data_content"}}},"uuid":"wV-iOL8LR3C0fXwu4q_nFQ","version":{"created":"7160099"}}}},"Index Meta Info":{"Source of data":"https://hobbitdata.informatik.uni-leipzig.de/KGE/shallom/"}}


# Entities

# Note: Not in current README
# Note: Default size parameter is 0, but takes lots of time
#curl -X GET http://unikge.cs.upb.de:5001/get-all-entity -H "Content-Type: application/json" -d '{"indexname":"shallom_dbpedia_index","size" : 3}'
# {"entitylist":["/10040729966879859333","/10095443016700224343","/10130736548629323603"]}

#curl -X GET http://unikge.cs.upb.de:5001/get-entity-embedding -H "Content-Type: application/json" -d '{"indexname":"shallom_dbpedia_index","entities" : ["/resource/Paderborn"]}'
# {"/resource/Paderborn":[0.2806874,-0.21256703,-0.47864893,0.21929161,-0.2297767,-0.31447953,-0.1175671,0.15006831,-0.10480619,-0.077421956,0.56386936,0.06708485,0.55256176,-0.1584095,-0.115171954,-0.054179046,0.35811296,0.10366277,-0.3444387,0.13747558,-0.29540744,-0.31908906,-0.25035203,-0.0570282,0.27496752]}

#curl -X GET http://unikge.cs.upb.de:5001/get-entity-neighbour -H "Content-Type: application/json" -d '{"indexname":"shallom_dbpedia_index","entity" : "/resource/Paderborn"}'
# {"neighbours":[{"embeddings":[0.2806874,-0.21256703,-0.47864893,0.21929161,-0.2297767,-0.31447953,-0.1175671,0.15006831,-0.10480619,-0.077421956,0.56386936,0.06708485,0.55256176,-0.1584095,-0.115171954,-0.054179046,0.35811296,0.10366277,-0.3444387,0.13747558,-0.29540744,-0.31908906,-0.25035203,-0.0570282,0.27496752],"entity":"/resource/Paderborn","id":3022311},{"embeddings":[0.06517222,-0.09128266,-0.22492482,0.1517856,-0.13554493,-0.2654005,-0.16763623,0.16139138,-0.09720595,-0.06254504,0.5484728,-0.034484383,0.3127621,-0.08806927,-0.18533827,0.14950046,0.20365371,0.19345152,-0.28739455,0.054363962,-0.21617676,-0.24165034,-0.23837745,-0.16458541,0.27725977],"entity":"/resource/Queens_Village%2C_Queens","id":3199647},{"embeddings":[0.16608968,-0.10336728,-0.37788653,0.22275327,-0.07986715,-0.37708816,-0.23474142,0.15379046,-0.19025543,0.08619698,0.32813853,-0.0315955,0.34324235,-0.0039787577,-0.20117049,-0.080228366,0.3809236,-0.04925551,-0.14092462,0.00087835576,-0.1355003,-0.257877,-0.2059766,-0.14567643,0.23938422],"entity":"/resource/Netherton","id":2886834},{"embeddings":[0.1623555,-0.3096464,-0.23602092,0.13372357,-0.11803415,-0.26382488,-0.05174188,0.11349874,-0.31312728,-0.103404246,0.38527521,-0.19192106,0.4035135,-0.1121594,-0.16742603,-0.0056264917,0.1281726,0.11133052,-0.25913987,0.15495165,-0.17353745,-0.38811007,-0.16104145,-0.07925813,0.20905216],"entity":"/resource/Orl%C3%A9ans%2C_Ontario","id":2995063},{"embeddings":[0.25796738,-0.23692483,-0.55498236,0.3296281,-0.1660565,-0.3667221,-0.34077325,0.31265646,-0.3483455,-0.22072297,0.5217661,0.093482934,0.41104978,0.15829945,-0.21901053,0.014657202,0.25137126,0.05343972,-0.21269895,0.18397821,-0.20756921,-0.3786252,-0.30655795,-0.105007604,0.13036186],"entity":"/resource/Kamloops","id":2265529},{"embeddings":[0.2462127,-0.5534573,-0.29936987,0.2857916,-0.07314101,-0.5169018,-0.22000119,0.27898788,-0.30611035,-0.1794786,0.7145223,0.002895375,0.4546645,0.12472037,-0.19113305,-0.034938864,0.3754277,0.28810105,-0.43698692,0.121241376,-0.22220372,-0.50692487,-0.5984292,-0.08720508,0.3296849],"entity":"/resource/Alton%2C_Illinois","id":238189},{"embeddings":[0.08946123,-0.11476182,-0.14529784,0.09490741,-0.064013645,-0.09967208,-0.11699668,0.099933386,-0.13150053,0.017367681,0.24342169,0.050848994,0.29457682,-0.06958502,-0.2276287,-0.05705854,0.1509671,-0.020492861,-0.12464433,0.12920192,-0.13513884,-0.108496346,-0.26492092,0.015631564,0.2053948],"entity":"/resource/Luceni","id":2589724},{"embeddings":[0.29402298,-0.15532589,-0.2398948,0.07471889,-0.3180809,-0.3601682,-0.03689831,0.28457114,-0.22802636,-0.08538409,0.67886245,-0.18720862,0.5822181,-0.109917,-0.062720194,-0.034813765,0.12901261,0.1542603,-0.35459867,0.32318172,-0.54861766,-0.24260432,-0.44090438,-0.3333469,0.35471743],"entity":"/resource/Fullerton%2C_California","id":1747914},{"embeddings":[0.31437522,-0.030359387,-0.26426634,-0.030581182,-0.052955575,-0.13186125,-0.18981364,0.17764892,-0.11738084,0.017256074,0.37413275,0.118855916,0.24524215,-0.047597613,-0.17849578,-0.059966825,0.28054824,-0.05337171,-0.37459326,0.065570265,-0.27351224,-0.24063931,-0.22169451,-0.12010677,0.13481827],"entity":"/resource/Altd%C3%B6bern","id":237185},{"embeddings":[0.28188148,-0.11528484,-0.5713064,0.24113002,-0.2521383,-0.38799125,-0.3841608,0.43233004,-0.397428,-0.28184557,0.7059655,0.012044701,0.4519937,0.13536169,-0.02367557,0.09993017,0.33340994,0.0026954534,-0.36105943,0.031444017,-0.2660708,-0.32503814,-0.39123505,0.0221748,0.10925626],"entity":"/resource/Terrassa","id":3685636}]}

# Note: In current README, this is '/get-entity-embedding-neighbour'
#curl -X GET http://unikge.cs.upb.de:5001/get-embedding-neighbour -H "Content-Type: application/json" -d '{"indexname":"shallom_dbpedia_index","embedding" : [0.2806874,-0.21256703,-0.47864893,0.21929161,-0.2297767,-0.31447953,-0.1175671,0.15006831,-0.10480619,-0.077421956,0.56386936,0.06708485,0.55256176,-0.1584095,-0.115171954,-0.054179046,0.35811296,0.10366277,-0.3444387,0.13747558,-0.29540744,-0.31908906,-0.25035203,-0.0570282,0.27496752],"distmetric":"cosine"}'
# {"neighbours":[{"embeddings":[0.2806874,-0.21256703,-0.47864893,0.21929161,-0.2297767,-0.31447953,-0.1175671,0.15006831,-0.10480619,-0.077421956,0.56386936,0.06708485,0.55256176,-0.1584095,-0.115171954,-0.054179046,0.35811296,0.10366277,-0.3444387,0.13747558,-0.29540744,-0.31908906,-0.25035203,-0.0570282,0.27496752],"entity":"/resource/Paderborn","id":3022311},{"embeddings":[0.06517222,-0.09128266,-0.22492482,0.1517856,-0.13554493,-0.2654005,-0.16763623,0.16139138,-0.09720595,-0.06254504,0.5484728,-0.034484383,0.3127621,-0.08806927,-0.18533827,0.14950046,0.20365371,0.19345152,-0.28739455,0.054363962,-0.21617676,-0.24165034,-0.23837745,-0.16458541,0.27725977],"entity":"/resource/Queens_Village%2C_Queens","id":3199647},{"embeddings":[0.16608968,-0.10336728,-0.37788653,0.22275327,-0.07986715,-0.37708816,-0.23474142,0.15379046,-0.19025543,0.08619698,0.32813853,-0.0315955,0.34324235,-0.0039787577,-0.20117049,-0.080228366,0.3809236,-0.04925551,-0.14092462,0.00087835576,-0.1355003,-0.257877,-0.2059766,-0.14567643,0.23938422],"entity":"/resource/Netherton","id":2886834},{"embeddings":[0.1623555,-0.3096464,-0.23602092,0.13372357,-0.11803415,-0.26382488,-0.05174188,0.11349874,-0.31312728,-0.103404246,0.38527521,-0.19192106,0.4035135,-0.1121594,-0.16742603,-0.0056264917,0.1281726,0.11133052,-0.25913987,0.15495165,-0.17353745,-0.38811007,-0.16104145,-0.07925813,0.20905216],"entity":"/resource/Orl%C3%A9ans%2C_Ontario","id":2995063},{"embeddings":[0.25796738,-0.23692483,-0.55498236,0.3296281,-0.1660565,-0.3667221,-0.34077325,0.31265646,-0.3483455,-0.22072297,0.5217661,0.093482934,0.41104978,0.15829945,-0.21901053,0.014657202,0.25137126,0.05343972,-0.21269895,0.18397821,-0.20756921,-0.3786252,-0.30655795,-0.105007604,0.13036186],"entity":"/resource/Kamloops","id":2265529},{"embeddings":[0.2462127,-0.5534573,-0.29936987,0.2857916,-0.07314101,-0.5169018,-0.22000119,0.27898788,-0.30611035,-0.1794786,0.7145223,0.002895375,0.4546645,0.12472037,-0.19113305,-0.034938864,0.3754277,0.28810105,-0.43698692,0.121241376,-0.22220372,-0.50692487,-0.5984292,-0.08720508,0.3296849],"entity":"/resource/Alton%2C_Illinois","id":238189},{"embeddings":[0.08946123,-0.11476182,-0.14529784,0.09490741,-0.064013645,-0.09967208,-0.11699668,0.099933386,-0.13150053,0.017367681,0.24342169,0.050848994,0.29457682,-0.06958502,-0.2276287,-0.05705854,0.1509671,-0.020492861,-0.12464433,0.12920192,-0.13513884,-0.108496346,-0.26492092,0.015631564,0.2053948],"entity":"/resource/Luceni","id":2589724},{"embeddings":[0.29402298,-0.15532589,-0.2398948,0.07471889,-0.3180809,-0.3601682,-0.03689831,0.28457114,-0.22802636,-0.08538409,0.67886245,-0.18720862,0.5822181,-0.109917,-0.062720194,-0.034813765,0.12901261,0.1542603,-0.35459867,0.32318172,-0.54861766,-0.24260432,-0.44090438,-0.3333469,0.35471743],"entity":"/resource/Fullerton%2C_California","id":1747914},{"embeddings":[0.31437522,-0.030359387,-0.26426634,-0.030581182,-0.052955575,-0.13186125,-0.18981364,0.17764892,-0.11738084,0.017256074,0.37413275,0.118855916,0.24524215,-0.047597613,-0.17849578,-0.059966825,0.28054824,-0.05337171,-0.37459326,0.065570265,-0.27351224,-0.24063931,-0.22169451,-0.12010677,0.13481827],"entity":"/resource/Altd%C3%B6bern","id":237185},{"embeddings":[0.28188148,-0.11528484,-0.5713064,0.24113002,-0.2521383,-0.38799125,-0.3841608,0.43233004,-0.397428,-0.28184557,0.7059655,0.012044701,0.4519937,0.13536169,-0.02367557,0.09993017,0.33340994,0.0026954534,-0.36105943,0.031444017,-0.2660708,-0.32503814,-0.39123505,0.0221748,0.10925626],"entity":"/resource/Terrassa","id":3685636}]}

